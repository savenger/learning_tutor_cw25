# Backend Notes for Frontend Generation

This document provides key information about the backend API and data models that will be useful for generating the frontend application.

## API Endpoints

All API endpoints are prefixed with `/api`.

### 1. Deck Management

*   **Get All Decks**:
    *   **Method**: `GET`
    *   **Path**: `/api/decks`
    *   **Response**: `Array<Deck>`
        ```json
        [
          {
            "id": 1,
            "name": "Biology Basics",
            "description": "Fundamental concepts in biology.",
            "createdAt": "2023-10-27T10:00:00.000Z",
            "updatedAt": "2023-10-27T10:00:00.000Z"
          },
          // ... more decks
        ]
        ```

*   **Get Single Deck (with Flashcards)**:
    *   **Method**: `GET`
    *   **Path**: `/api/decks/:id`
    *   **Parameters**: `id` (number) - The ID of the deck.
    *   **Response**: `Deck` object including `Flashcards` array.
        ```json
        {
          "id": 1,
          "name": "Biology Basics",
          "description": "Fundamental concepts in biology.",
          "createdAt": "2023-10-27T10:00:00.000Z",
          "updatedAt": "2023-10-27T10:00:00.000Z",
          "Flashcards": [
            {
              "id": 101,
              "question": "What is the powerhouse of the cell?",
              "answer": "Mitochondria",
              "deckId": 1,
              "createdAt": "2023-10-27T10:05:00.000Z",
              "updatedAt": "2023-10-27T10:05:00.000Z"
            },
            {
              "id": 102,
              "question": "What is DNA?",
              "answer": "Deoxyribonucleic acid",
              "deckId": 1,
              "createdAt": "2023-10-27T10:06:00.000Z",
              "updatedAt": "2023-10-27T10:06:00.000Z"
            }
          ]
        }
        ```

*   **Create Deck**:
    *   **Method**: `POST`
    *   **Path**: `/api/decks`
    *   **Request Body**:
        ```json
        {
          "name": "New Deck Name",
          "description": "Description of the new deck."
        }
        ```
    *   **Response**: `Deck` object (the newly created deck).

*   **Update Deck**:
    *   **Method**: `PUT`
    *   **Path**: `/api/decks/:id`
    *   **Parameters**: `id` (number) - The ID of the deck.
    *   **Request Body**: (Partial updates allowed)
        ```json
        {
          "name": "Updated Deck Name"
        }
        ```
    *   **Response**: `Deck` object (the updated deck).

*   **Delete Deck**:
    *   **Method**: `DELETE`
    *   **Path**: `/api/decks/:id`
    *   **Parameters**: `id` (number) - The ID of the deck.
    *   **Response**: `{ "message": "Deck deleted successfully" }`

### 2. Flashcard Management

*   **Get All Flashcards**:
    *   **Method**: `GET`
    *   **Path**: `/api/flashcards`
    *   **Response**: `Array<Flashcard>` (all flashcards across all decks)

*   **Get Single Flashcard**:
    *   **Method**: `GET`
    *   **Path**: `/api/flashcards/:id`
    *   **Parameters**: `id` (number) - The ID of the flashcard.
    *   **Response**: `Flashcard` object.

*   **Create Flashcard**:
    *   **Method**: `POST`
    *   **Path**: `/api/flashcards`
    *   **Request Body**:
        ```json
        {
          "question": "New flashcard question?",
          "answer": "New flashcard answer.",
          "deckId": 1 // ID of the deck this flashcard belongs to
        }
        ```
    *   **Response**: `Flashcard` object (the newly created flashcard).

*   **Update Flashcard**:
    *   **Method**: `PUT`
    *   **Path**: `/api/flashcards/:id`
    *   **Parameters**: `id` (number) - The ID of the flashcard.
    *   **Request Body**: (Partial updates allowed)
        ```json
        {
          "answer": "Updated answer."
        }
        ```
    *   **Response**: `Flashcard` object (the updated flashcard).

*   **Delete Flashcard**:
    *   **Method**: `DELETE`
    *   **Path**: `/api/flashcards/:id`
    *   **Parameters**: `id` (number) - The ID of the flashcard.
    *   **Response**: `{ "message": "Flashcard deleted successfully" }`

### 3. FlashCardAnswer Management

*   **Validate Flashcard Answer**:
    *   **Method**: `POST`
    *   **Path**: `/api/flashcardanswers/validate`
    *   **Request Body**:
        ```json
        {
          "flashcardId": 1, // ID of the flashcard being answered
          "userAnswer": "User's typed answer here.",
          "time": "2023-10-27T10:30:00.000Z" // ISO 8601 format
        }
        ```
    *   **Response**: `FlashCardValidationResponse` object with validation result
        ```json
        {
          "id": 1,
          "flashcardId": 1,
          "userAnswer": "User's typed answer here.",
          "time": "2023-10-27T10:30:00.000Z",
          "feedback": "This is placeholder feedback. In the future, this will be generated by AI validation.",
          "createdAt": "2023-10-27T10:30:00.000Z",
          "updatedAt": "2023-10-27T10:30:00.000Z",
          "isCorrect": true,
          "correctAnswer": "The actual correct answer"
        }
        ```

*   **Record Flashcard Answer**:
    *   **Method**: `POST`
    *   **Path**: `/api/flashcardanswers`
    *   **Request Body**:
        ```json
        {
          "flashcardId": 1, // ID of the flashcard being answered
          "userAnswer": "User's typed answer here.",
          "time": "2023-10-27T10:30:00.000Z" // ISO 8601 format
        }
        ```
    *   **Response**: `FlashCardAnswer` object (the newly recorded answer).

*   **Get All Flashcard Answers**:
    *   **Method**: `GET`
    *   **Path**: `/api/flashcardanswers`
    *   **Response**: `Array<FlashCardAnswer>` (for analytics/history)

### 4. Document Processing

*   **Process Document**:
    *   **Method**: `POST`
    *   **Path**: `/api/processDocument`
    *   **Request Body**: This endpoint is a placeholder. In a real scenario, it would likely accept a file upload (e.g., `multipart/form-data`). For now, it can be called with an empty body or a simple JSON.
    *   **Response**:
        ```json
        {
          "result": "success",
          "message": "Document processing initiated."
        }
        ```
        or
        ```json
        {
          "result": "error",
          "message": "Failed to process document."
        }
        ```

## Data Models (Frontend Perspective)

### `Deck`
```typescript
interface Deck {
  id: number;
  name: string;
  description: string;
  createdAt: string; // ISO 8601 datetime string
  updatedAt: string; // ISO 8601 datetime string
  Flashcards?: Flashcard[]; // Optional, only included when fetching a single deck by ID
}
```

### `Flashcard`
```typescript
interface Flashcard {
  id: number;
  question: string;
  answer: string;
  deckId: number; // Foreign key to Deck
  createdAt: string; // ISO 8601 datetime string
  updatedAt: string; // ISO 8601 datetime string
}
```

### `FlashCardAnswer`
```typescript
interface FlashCardAnswer {
  id: number;
  time: string; // ISO 8601 datetime string
  userAnswer: string;
  flashcardId: number; // Foreign key to Flashcard
  feedback?: string; // AI-generated feedback
  createdAt: string; // ISO 8601 datetime string
  updatedAt: string; // ISO 8601 datetime string
}
```

### `FlashCardValidationResponse`
```typescript
interface FlashCardValidationResponse extends FlashCardAnswer {
  isCorrect: boolean;
  correctAnswer: string;
}
```

## Important Notes for Frontend Development

*   **Base URL**: The backend will be running on `http://localhost:3001`. All API calls should be made to this base URL.
*   **CORS**: Ensure CORS is handled if the frontend is served from a different origin (e.g., `localhost:3000`). The backend currently does not explicitly set CORS headers, so this might need to be added if issues arise.
*   **Error Handling**: The backend returns standard HTTP status codes (e.g., 200 for success, 404 for not found, 500 for server errors). Frontend should implement robust error handling.
*   **Document Importer Page**: The `processDocument` endpoint is a placeholder. The frontend's "DocumentImporter" page should be designed to allow file uploads, and the actual parsing and flashcard creation logic will need to be implemented on the backend side in the future. For now, it can simulate a successful or failed upload.
*   **DeckPlay Page**: This page will need to fetch a specific deck by its ID, then iterate through its `Flashcards` to display them. It will also need to send `FlashCardAnswer` data to the backend.
*   **DeckList Page**: This page will need to fetch all decks and display them.
