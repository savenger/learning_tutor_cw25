"use strict";(self.webpackChunklearnify_frontend=self.webpackChunklearnify_frontend||[]).push([[50],{4775:(t,n,i)=>{i.r(n),i.d(n,{LegacyDestination:()=>Y,ajsDestinations:()=>P});var e=i(3945),o=i(2173),r=i(6551),s=i(5814),a=i(5591),u=i(9324),l=i(5159),d=i(9185),c=i(2145),h=i(428),v=i(6655),f=i(9738),p=i(9892),g=i(4029),y=i(5408);function m(t){return t.toLowerCase().replace(".","").replace(/\s+/g,"-")}function w(t,n){return void 0===n&&(n=!1),n?btoa(t).replace(/=/g,""):void 0}function b(t,n,i,o){return(0,e.sH)(this,void 0,void 0,function(){var r,s,a,u,l,d;return(0,e.YH)(this,function(c){switch(c.label){case 0:r=m(n),s=w(r,o),a=(0,g.YM)(),u="".concat(a,"/integrations/").concat(null!==s&&void 0!==s?s:r,"/").concat(i,"/").concat(null!==s&&void 0!==s?s:r,".dynamic.js.gz"),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,(0,y.k)(u)];case 2:return c.sent(),function(t,n,i){var o,r;try{var s=(null!==(r=null===(o=null===window||void 0===window?void 0:window.performance)||void 0===o?void 0:o.getEntriesByName(t,"resource"))&&void 0!==r?r:[])[0];s&&n.stats.gauge("legacy_destination_time",Math.round(s.duration),(0,e.fX)([i],s.duration<100?["cached"]:[],!0))}catch(a){}}(u,t,n),[3,4];case 3:throw l=c.sent(),t.stats.gauge("legacy_destination_time",-1,["plugin:".concat(n),"failed"]),l;case 4:return d=window["".concat(r,"Deps")],[4,Promise.all(d.map(function(t){return(0,y.k)(a+t+".gz")}))];case 5:return c.sent(),window["".concat(r,"Loader")](),[2,window["".concat(r,"Integration")]]}})})}var H=i(8718),_=function(t,n){var i,e=n.type,o=n.bundlingStatus,r=n.versionSettings,s="unbundled"!==o&&("browser"===e||(null===(i=null===r||void 0===r?void 0:r.componentTypes)||void 0===i?void 0:i.includes("browser")));return!t.startsWith("Segment")&&"Iterable"!==t&&s},z=function(t,n){var i=!1===n.All&&void 0===n[t];return!1===n[t]||i},k=i(8584),C=i(4228);function S(t,n){return(0,e.sH)(this,void 0,void 0,function(){var i,o=this;return(0,e.YH)(this,function(a){switch(a.label){case 0:return i=[],(0,r.a)()?[2,n]:[4,(0,h._)(function(){return n.length>0&&(0,r.s)()},function(){return(0,e.sH)(o,void 0,void 0,function(){var o,r;return(0,e.YH)(this,function(e){switch(e.label){case 0:return(o=n.pop())?[4,(0,l.C)(o,t)]:[2];case 1:return r=e.sent(),r instanceof s.o||i.push(o),[2]}})})})];case 1:return a.sent(),i.map(function(t){return n.pushWithBackoff(t)}),[2,n]}})})}var Y=function(){function t(t,n,i,o,r,s){void 0===o&&(o={});var a=this;this.options={},this.type="destination",this.middleware=[],this.initializePromise=(0,C.u)(),this.flushing=!1,this.name=t,this.version=n,this.settings=(0,e.Cl)({},o),this.disableAutoISOConversion=r.disableAutoISOConversion||!1,this.integrationSource=s,this.settings.type&&"browser"===this.settings.type&&delete this.settings.type,this.initializePromise.promise.then(function(t){return a._initialized=t},function(){}),this.options=r,this.buffer=r.disableClientPersistence?new v.M(4,[]):new f.x(4,"".concat(i,":dest-").concat(t)),this.scheduleFlush()}return t.prototype.isLoaded=function(){return!!this._ready},t.prototype.ready=function(){var t=this;return this.initializePromise.promise.then(function(){var n;return null!==(n=t.onReady)&&void 0!==n?n:Promise.resolve()})},t.prototype.load=function(t,n){var i;return(0,e.sH)(this,void 0,void 0,function(){var o,r,s=this;return(0,e.YH)(this,function(e){switch(e.label){case 0:return this._ready||void 0!==this.onReady?[2]:null===(i=this.integrationSource)||void 0===i?[3,1]:(r=i,[3,3]);case 1:return[4,b(t,this.name,this.version,this.options.obfuscate)];case 2:r=e.sent(),e.label=3;case 3:o=r,this.integration=function(t,n,i){var e;"Integration"in t?(t({user:function(){return i.user()},addIntegration:function(){}}),e=t.Integration):e=t;var o=new e(n);return o.analytics=i,o}(o,this.settings,n),this.onReady=new Promise(function(t){s.integration.once("ready",function(){s._ready=!0,t(!0)})}),this.integration.on("initialize",function(){s.initializePromise.resolve(!0)});try{(0,k.y)(t,{integrationName:this.name,methodName:"initialize",type:"classic"}),this.integration.initialize()}catch(a){throw(0,k.y)(t,{integrationName:this.name,methodName:"initialize",type:"classic",didError:!0}),this.initializePromise.resolve(!1),a}return[2]}})})},t.prototype.unload=function(t,n){return function(t,n,i){return(0,e.sH)(this,void 0,void 0,function(){var o,r,s,a;return(0,e.YH)(this,function(e){return o=(0,g.YM)(),r=m(t),s=w(t,i),a="".concat(o,"/integrations/").concat(null!==s&&void 0!==s?s:r,"/").concat(n,"/").concat(null!==s&&void 0!==s?s:r,".dynamic.js.gz"),[2,(0,y.d)(a)]})})}(this.name,this.version,this.options.obfuscate)},t.prototype.addMiddleware=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.middleware=(t=this.middleware).concat.apply(t,n)},t.prototype.shouldBuffer=function(t){return"page"!==t.event.type&&((0,r.a)()||!0!==this._ready||!0!==this._initialized)},t.prototype.send=function(t,n,i){var o,r;return(0,e.sH)(this,void 0,void 0,function(){var s,u,l,c,h,v;return(0,e.YH)(this,function(f){switch(f.label){case 0:return this.shouldBuffer(t)?(this.buffer.push(t),this.scheduleFlush(),[2,t]):(s=null===(r=null===(o=this.options)||void 0===o?void 0:o.plan)||void 0===r?void 0:r.track,u=t.event.event,s&&u&&"Segment.io"!==this.name&&(l=s[u],(0,d.j)(s,l)?t.updateEvent("integrations",(0,e.Cl)((0,e.Cl)({},t.event.integrations),null===l||void 0===l?void 0:l.integrations)):(t.updateEvent("integrations",(0,e.Cl)((0,e.Cl)({},t.event.integrations),{All:!1,"Segment.io":!0})),t.cancel(new a.d({retry:!1,reason:"Event ".concat(u," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"}))),(null===l||void 0===l?void 0:l.enabled)&&!1===(null===l||void 0===l?void 0:l.integrations[this.name])&&t.cancel(new a.d({retry:!1,reason:"Event ".concat(u," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"}))),[4,(0,p.applyDestinationMiddleware)(this.name,t.event,this.middleware)]);case 1:if(null===(c=f.sent()))return[2,t];h=new n(c,{traverse:!this.disableAutoISOConversion}),(0,k.y)(t,{integrationName:this.name,methodName:i,type:"classic"}),f.label=2;case 2:return f.trys.push([2,5,,6]),this.integration?[4,this.integration.invoke.call(this.integration,i,h)]:[3,4];case 3:f.sent(),f.label=4;case 4:return[3,6];case 5:throw v=f.sent(),(0,k.y)(t,{integrationName:this.name,methodName:i,type:"classic",didError:!0}),v;case 6:return[2,t]}})})},t.prototype.track=function(t){return(0,e.sH)(this,void 0,void 0,function(){return(0,e.YH)(this,function(n){return[2,this.send(t,o.Track,"track")]})})},t.prototype.page=function(t){var n;return(0,e.sH)(this,void 0,void 0,function(){return(0,e.YH)(this,function(i){switch(i.label){case 0:return(null===(n=this.integration)||void 0===n?void 0:n._assumesPageview)&&!this._initialized&&this.integration.initialize(),[4,this.initializePromise.promise];case 1:return i.sent(),[2,this.send(t,o.Page,"page")]}})})},t.prototype.identify=function(t){return(0,e.sH)(this,void 0,void 0,function(){return(0,e.YH)(this,function(n){return[2,this.send(t,o.Identify,"identify")]})})},t.prototype.alias=function(t){return(0,e.sH)(this,void 0,void 0,function(){return(0,e.YH)(this,function(n){return[2,this.send(t,o.Alias,"alias")]})})},t.prototype.group=function(t){return(0,e.sH)(this,void 0,void 0,function(){return(0,e.YH)(this,function(n){return[2,this.send(t,o.Group,"group")]})})},t.prototype.scheduleFlush=function(){var t=this;this.flushing||setTimeout(function(){return(0,e.sH)(t,void 0,void 0,function(){var t;return(0,e.YH)(this,function(n){switch(n.label){case 0:return(0,r.a)()||!0!==this._ready||!0!==this._initialized?(this.scheduleFlush(),[2]):(this.flushing=!0,t=this,[4,S(this,this.buffer)]);case 1:return t.buffer=n.sent(),this.flushing=!1,this.buffer.todo>0&&this.scheduleFlush(),[2]}})})},5e3*Math.random())},t}();function P(t,n,i,o,r,s){var a,l;if(void 0===i&&(i={}),void 0===o&&(o={}),(0,u.S)())return[];n.plan&&((o=null!==o&&void 0!==o?o:{}).plan=n.plan);var d=null!==(l=null===(a=n.middlewareSettings)||void 0===a?void 0:a.routingRules)&&void 0!==l?l:[],h=n.integrations,v=o.integrations,f=(0,c.J)(n,null!==o&&void 0!==o?o:{}),p=null===s||void 0===s?void 0:s.reduce(function(t,n){var i;return(0,e.Cl)((0,e.Cl)({},t),((i={})[function(t){return("Integration"in t?t.Integration:t).prototype.name}(n)]=n,i))},{}),g=new Set((0,e.fX)((0,e.fX)([],Object.keys(h).filter(function(t){return _(t,h[t])}),!0),Object.keys(p||{}).filter(function(t){return(0,H.Qd)(h[t])||(0,H.Qd)(null===v||void 0===v?void 0:v[t])}),!0));return Array.from(g).filter(function(t){return!z(t,i)}).map(function(n){var i=function(t){var n,i,e,o;return null!==(o=null!==(i=null===(n=null===t||void 0===t?void 0:t.versionSettings)||void 0===n?void 0:n.override)&&void 0!==i?i:null===(e=null===t||void 0===t?void 0:t.versionSettings)||void 0===e?void 0:e.version)&&void 0!==o?o:"latest"}(h[n]),e=new Y(n,i,t,f[n],o,null===p||void 0===p?void 0:p[n]);return d.filter(function(t){return t.destinationName===n}).length>0&&r&&e.addMiddleware(r),e})}},9185:(t,n,i)=>{function e(t,n){var i,e;return"boolean"===typeof(null===n||void 0===n?void 0:n.enabled)?n.enabled:null===(e=null===(i=null===t||void 0===t?void 0:t.__default)||void 0===i?void 0:i.enabled)||void 0===e||e}i.d(n,{j:()=>e})}}]);
//# sourceMappingURL=ajs-destination.42d12446.chunk.js.map